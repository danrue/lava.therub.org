device_type:  beaglebone-black

job_name: beaglebone-black healthcheck
timeouts:
  job:
    minutes: 10
  action:
   minutes: 5
priority: high
visibility: public

actions:
  - deploy:
     namespace: ramdisktest
     timeout:
       minutes: 2
     to: tftp
     kernel:
         url: http://images.collabora.co.uk/singularity/health-check/4.10/armhf/zImage
         type: image
     ramdisk:
         url: http://images.collabora.co.uk/singularity/health-check/rootfs/buildroot/armhf/rootfs.cpio.gz
         compression: gz
     modules:
         url: http://images.collabora.co.uk/singularity/health-check/4.10/armhf/modules.tar.xz
         compression: xz
     dtb:
         url: http://images.collabora.co.uk/singularity/health-check/4.10/armhf/dtb/am335x-boneblack.dtb
     os: oe
  - boot:
     namespace: ramdisktest
     method: u-boot
     commands: ramdisk
     failure_retry: 3
     type: image
     prompts:
       - 'linaro-test'
       - '/ #'

  - deploy:
     namespace: nfstest
     timeout:
       minutes: 2
     to: tftp
     kernel:
         url: http://images.collabora.co.uk/singularity/health-check/4.10/armhf/zImage
         type: image
     modules:
         url: http://images.collabora.co.uk/singularity/health-check/4.10/armhf/modules.tar.xz
         compression: xz
     dtb:
         url: http://images.collabora.co.uk/singularity/health-check/4.10/armhf/dtb/am335x-boneblack.dtb
     nfsrootfs:
         url: http://images.collabora.co.uk/singularity/health-check/rootfs/stretch/stretch-armhf.tar.gz
     os: debian
  - boot:
     namespace: nfstest
     method: u-boot
     commands: nfs
     type: image
     failure_retry: 3
     prompts:
       - 'user@'
       - '/ #'
     auto_login:
        login_prompt: 'login:'
        username: user
        password_prompt: 'Password:'
        password: user
        login_commands:
          - uname -a
